# Prevent direct commits to protected branches
branch=$(git rev-parse --abbrev-ref HEAD)

if echo "$branch" | grep -Eq '^(main)$'; then
  echo "‚ùå Direct commits to $branch are not allowed. Please use a feature or bugfix branch."
  exit 1
fi

# Run lint-staged for lint and format checks on staged files
pnpm lint-staged

# Run typecheck on entire project
echo "Running typecheck..."
pnpm typecheck
